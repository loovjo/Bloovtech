package com.loovjo.bloovtech.tileentity;

import java.lang.reflect.Field;
import java.util.Random;
import java.util.regex.Pattern;

import net.minecraft.block.Block;
import net.minecraft.entity.item.EntityItem;
import net.minecraft.init.Blocks;
import net.minecraft.item.ItemStack;
import net.minecraft.item.crafting.FurnaceRecipes;
import net.minecraft.tileentity.TileEntity;

public class TileEntityMagnetQuarry extends TileEntity {

	public int i = 0;
	public boolean hasOre;

	@Override
	public void updateEntity() {
		if (!worldObj.isRemote)
			for (Field o : Blocks.class.getFields()) {
				Object obj;
				try {
					obj = o.get(new Blocks());
					if (obj instanceof Block) {

						Block b = (Block) obj;
						if (Pattern.compile("ore|block")
								.matcher(b.getUnlocalizedName()).find()) {
							ItemStack is;
							try {
								is = FurnaceRecipes.smelting()
										.getSmeltingResult(new ItemStack(b));
							} catch (Exception e) {
								is = new ItemStack(b);
							}
							if (new Random().nextInt(10) == 0)
								worldObj.spawnEntityInWorld(new EntityItem(
										worldObj, xCoord + 0.5, yCoord + 2,
										zCoord + 0.5, is));
						}
					}
				} catch (IllegalArgumentException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				} catch (IllegalAccessException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}

	}
}
